# Sabueso card schema (conceptual, frozen draft)
# All fields use a uniform evidence mechanism via evidence_store + evidence_ids.

schema:
  name: sabueso-card
  version: 0.1.0
  created_at: 2026-02-01
  note: "Conceptual schema. Types are illustrative; enforcement via code later."

card_base:
  meta:
    card_id: string
    entity_type: enum[protein, peptide, small_molecule]
    created_at: date
    updated_at: date
    version: string
    schema_version: string

  identifiers:
    primary_id:
      value: string
      evidence_ids: [string]
    secondary_ids:
      uniprot: { value: string, evidence_ids: [string] }
      pdb: { value: string, evidence_ids: [string] }
      chembl: { value: string, evidence_ids: [string] }
      pubchem: { value: string, evidence_ids: [string] }
      drugbank: { value: string, evidence_ids: [string] }
      chemspider: { value: string, evidence_ids: [string] }
      emolecules: { value: string, evidence_ids: [string] }
      other: [ { value: string, evidence_ids: [string] } ]

  names:
    canonical_name: { value: string, evidence_ids: [string] }
    synonyms: { value: [string], evidence_ids: [string] }

  summary:
    short_description: { value: string, evidence_ids: [string] }

  structure:
    sequences: { value: [string], evidence_ids: [string] }
    structures_3d:
      value: [ { pdb_id: string, file_ref: string, method: string, resolution: number } ]
      evidence_ids: [string]
    structures_2d:
      value: [ { format: string, file_ref: string } ]
      evidence_ids: [string]

  properties:
    physchem:
      molecular_weight: { value: number, evidence_ids: [string] }
      formula: { value: string, evidence_ids: [string] }
      isoelectric_point: { value: number, evidence_ids: [string] }
      logp: { value: number, evidence_ids: [string] }
      tpsa: { value: number, evidence_ids: [string] }
      hbd: { value: number, evidence_ids: [string] }
      hba: { value: number, evidence_ids: [string] }
      rotatable_bonds: { value: number, evidence_ids: [string] }
    bio:
      function: { value: string, evidence_ids: [string] }
      keywords: { value: [string], evidence_ids: [string] }

  annotations:
    pathways: { value: [string], evidence_ids: [string] }
    targets: { value: [string], evidence_ids: [string] }
    organism: { value: string, evidence_ids: [string] }
    domains: { value: [string], evidence_ids: [string] }
    families: { value: [string], evidence_ids: [string] }

  interactions:
    binding_partners: { value: [string], evidence_ids: [string] }
    ppi_databases: { value: [string], evidence_ids: [string] }

  references:
    publications: { value: [ { title: string, doi: string, pmid: string } ], evidence_ids: [string] }

  availability:
    vendors: { value: [string], evidence_ids: [string] }
    catalog_ids: { value: [string], evidence_ids: [string] }

  quality:
    conflicts: [ { field: string, evidence_ids: [string] } ]
    completeness_score: number
    confidence_score: number

  provenance:
    sources_consulted: [ { source: string, retrieved_at: date } ]
    query_inputs: [ { input_type: string, value: string } ]

  evidence_store:
    E1:
      field: string
      value: any
      normalized_value: any
      sources: [string]
      source_records: [string]
      retrieved_at: date
      timestamps: { published_at: date, updated_at: date }
      confidence: number

  selection_rules:
    field_path:
      strategy: string
      preferred_sources: [string]
      tie_breaker: string


protein_card:
  inherits: card_base

  uniprot_comments:
    function: { value: string, evidence_ids: [string] }
    catalytic_activity: { value: [string], evidence_ids: [string] }
    biophysicochemical_properties: { value: [string], evidence_ids: [string] }
    kinetics: { value: [string], evidence_ids: [string] }
    activity_regulation: { value: [string], evidence_ids: [string] }
    pathway: { value: [string], evidence_ids: [string] }
    subunit: { value: [string], evidence_ids: [string] }
    interaction: { value: [string], evidence_ids: [string] }
    subcellular_location: { value: [string], evidence_ids: [string] }
    tissue_specificity: { value: [string], evidence_ids: [string] }
    ptm: { value: [string], evidence_ids: [string] }
    polymorphism: { value: [string], evidence_ids: [string] }
    sequence_caution: { value: [string], evidence_ids: [string] }
    alternative_products: { value: [string], evidence_ids: [string] }
    domain: { value: [string], evidence_ids: [string] }
    similarity: { value: [string], evidence_ids: [string] }
    miscellaneous: { value: [string], evidence_ids: [string] }
    caution: { value: [string], evidence_ids: [string] }
    web_resource: { value: [string], evidence_ids: [string] }

  features_positional:
    # Types observed in UniProt JSON for P52789, P35372, A0A140VJM9
    active_site: [ { location: string, description: string, evidence_ids: [string] } ]
    alternative_sequence: [ { location: string, description: string, evidence_ids: [string] } ]
    beta_strand: [ { location: string, description: string, evidence_ids: [string] } ]
    binding_site: [ { location: string, description: string, evidence_ids: [string] } ]
    chain: [ { location: string, description: string, evidence_ids: [string] } ]
    disulfide_bond: [ { location: string, description: string, evidence_ids: [string] } ]
    domain: [ { location: string, description: string, evidence_ids: [string] } ]
    glycosylation: [ { location: string, description: string, evidence_ids: [string] } ]
    helix: [ { location: string, description: string, evidence_ids: [string] } ]
    lipidation: [ { location: string, description: string, evidence_ids: [string] } ]
    modified_residue: [ { location: string, description: string, evidence_ids: [string] } ]
    motif: [ { location: string, description: string, evidence_ids: [string] } ]
    mutagenesis: [ { location: string, description: string, evidence_ids: [string] } ]
    natural_variant: [ { location: string, description: string, evidence_ids: [string] } ]
    region: [ { location: string, description: string, evidence_ids: [string] } ]
    sequence_conflict: [ { location: string, description: string, evidence_ids: [string] } ]
    topological_domain: [ { location: string, description: string, evidence_ids: [string] } ]
    transmembrane: [ { location: string, description: string, evidence_ids: [string] } ]
    turn: [ { location: string, description: string, evidence_ids: [string] } ]

  pdb_structure:
    entry_metadata:
      classification: { value: string, evidence_ids: [string] }
      experimental_method: { value: string, evidence_ids: [string] }
      resolution: { value: number, evidence_ids: [string] }
      deposition_date: { value: date, evidence_ids: [string] }
      release_date: { value: date, evidence_ids: [string] }
      primary_citation: { value: { title: string, doi: string, pmid: string }, evidence_ids: [string] }
    entity_metadata:
      chains: { value: [string], evidence_ids: [string] }
      sequence_length: { value: number, evidence_ids: [string] }
      uniprot_mapping: { value: [string], evidence_ids: [string] }
      ec_numbers: { value: [string], evidence_ids: [string] }


peptide_card:
  inherits: protein_card
  note: "Peptide cards share UniProt structure but may omit PDB sections if no 3D entry exists."

  peptide_specific:
    origin:
      parent_protein: { value: string, evidence_ids: [string] }
      cleavage_site: { value: string, evidence_ids: [string] }
    activity:
      bioactivity: { value: [string], evidence_ids: [string] }
      potency: { value: [string], evidence_ids: [string] }


small_molecule_card:
  inherits: card_base

  identifiers:
    smiles: { value: string, evidence_ids: [string] }
    inchi: { value: string, evidence_ids: [string] }
    inchikey: { value: string, evidence_ids: [string] }

  properties:
    physchem:
      molecular_weight: { value: number, evidence_ids: [string] }
      formula: { value: string, evidence_ids: [string] }
      logp: { value: number, evidence_ids: [string] }
      tpsa: { value: number, evidence_ids: [string] }
      hbd: { value: number, evidence_ids: [string] }
      hba: { value: number, evidence_ids: [string] }
      rotatable_bonds: { value: number, evidence_ids: [string] }
      aromatic_rings: { value: number, evidence_ids: [string] }
      ro5_violations: { value: number, evidence_ids: [string] }

  bioactivity:
    targets: { value: [string], evidence_ids: [string] }
    assays: { value: [string], evidence_ids: [string] }
    activity_values: { value: [string], evidence_ids: [string] }

  clinical:
    pharmacology: { value: [string], evidence_ids: [string] }
    admet: { value: [string], evidence_ids: [string] }
    clinical_trials: { value: [string], evidence_ids: [string] }
    pharmacovigilance: { value: [string], evidence_ids: [string] }
    indications: { value: [string], evidence_ids: [string] }
    contraindications: { value: [string], evidence_ids: [string] }
    interactions: { value: [string], evidence_ids: [string] }

  availability:
    vendors: { value: [string], evidence_ids: [string] }
    catalog_ids: { value: [string], evidence_ids: [string] }
    packaging: { value: [string], evidence_ids: [string] }

